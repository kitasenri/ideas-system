# About Ideas 
## Overviews

Ideas System is for creating static pages.  
Ideas system has the three parts and these are called as theme, style and item.  
    
  Theme  : This is text information.  
  Style  : This is design or to select to use parts.  
  Item   : This is the content from items.   
  
We can combine these parts by using whitelist.  
If many parts are registerred, the page is generated by multiplication.  
  
You can use this system as landing page, seo page or campaign page.  
  
## How to use
#### Install required modules

Please run the below shell and install modules from github.

    $ sh ./resoruces/requirements.sh

#### Create tables

Change the db setting on config

    $ vi ./resources/config_test.json
    $ vi ./resources/config_production.json    

Please run the below command.  
You can create tables by using model struct.

    $ go run ./db/create.go
    $ go run ./db/migrate.go

#### Run the apps

Please input the below command and run the front & back.

    If circus is not installed...
    $ pip install tornado==4.5.3 circus

    Launch front
    $ cd ./src/startup/front/
    $ ln -s ./../../resources/config_production.json  config.json
    $ go build -x 
    $ circusd ideas-back.ini --daemon

    Launch back
    $ cd ./src/startup/back/
    $ ln -s ./../../resources/config_production.json  config.json
    $ go build -x 
    $ circusd ideas-front.ini --daemon

    Reload app
    $ circusctl reload ${front|back}

#### API Gateway

Please add the rewrite rule by using nginx or other proxy server.
The below example is for nginx.

    server {

    listen       443;
    server_name  your.domain.name;

    access_log  /var/log/nginx/front/access.log  main;
    error_log   /var/log/nginx/front/error.log error;

    proxy_send_timeout 60;
    proxy_read_timeout 60;
    proxy_connect_timeout 60;

    proxy_set_header    Host                   $host;
    proxy_set_header    X-Real-IP              $remote_addr;
    proxy_set_header    X-Forwarded-Host       $host;
    proxy_set_header    X-Forwarded-Server     $host;
    proxy_set_header    X-Forwarded-Proto      $scheme;
    proxy_set_header    X-Forwarded-For        $proxy_add_x_forwarded_for;

    location / {

        rewrite ^/(.*)_(.*)_(.*)$ /?themeKey=$1&styleKey=$2&itemKey=$3 break;

        proxy_pass http://ideas-front:18080;

    }

    }
